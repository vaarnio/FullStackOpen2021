{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","update","id","request","put","console","log","deleteP","delete","Notification","message","isGood","className","Filter","filter","handleFilterChange","value","onChange","AddNew","props","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","DeleteId","deletePerson","onClick","Persons","shownPersons","person","name","toLowerCase","includes","map","number","Person","style","display","App","useState","setPersons","setNewName","setNewNumber","RefreshPersons","setRefreshPersons","setFilter","errorMessage","setErrorMessage","setIsGood","useEffect","personService","initialPersons","AddNewProps","event","preventDefault","target","newPerson","result","window","confirm","find","returnedPerson","catch","error","setTimeout","ReactDOM","render","document","getElementById"],"mappings":"0MACMA,EAAU,eAgCDC,EAPC,CACZC,OAxBW,WAEX,OADgBC,IAAMC,IAAIJ,GACXK,MAAK,SAAAC,GAAQ,OACxBA,EAASC,SAsBbC,OAlBW,SAAAC,GAEX,OADgBN,IAAMO,KAAKV,EAASS,IAkBpCE,OATW,SAACC,EAAIH,GAChB,IAAMI,EAAUV,IAAMW,IAAN,UAAad,EAAb,YAAwBY,GAAMH,GAE9C,OADAM,QAAQC,IAAR,6CAAkDJ,IAC3CC,GAOPI,QAfY,SAAAL,GACZT,IAAMe,OAAN,UAAgBlB,EAAhB,YAA2BY,IAC3BG,QAAQC,IAAR,kCAAuCJ,M,eCkGrCO,EAAe,SAAC,GAAuB,IAAtBC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,OAC9B,OAAe,OAAZD,EACM,KAIP,qBAAKE,UAAWD,EAAS,oBAAsB,mBAA/C,SACGD,KAKDG,EAAS,SAAC,GAAkC,IAAjCC,EAAgC,EAAhCA,OAAQC,EAAwB,EAAxBA,mBACvB,OACE,qDACoB,uBAAOC,MAAOF,EAAQG,SAAUF,QAKlDG,EAAS,SAACC,GACd,IAAOC,EAAuED,EAAvEC,UAAWC,EAA4DF,EAA5DE,QAASC,EAAmDH,EAAnDG,UAAWC,EAAwCJ,EAAxCI,iBAAkBC,EAAsBL,EAAtBK,mBACxD,OACE,8BACE,uBAAMC,SAAUL,EAAhB,UACE,gCACE,yCAAW,uBAAOJ,MAAOK,EAASJ,SAAUM,OAC5C,2CAAa,uBAAOP,MAAOM,EAAWL,SAAUO,UAElD,8BACE,wBAAQE,KAAK,SAAb,yBAOJC,EAAW,SAAC,GAAwB,IAAvBzB,EAAsB,EAAtBA,GAAI0B,EAAkB,EAAlBA,aACrB,OACE,8BACE,wBAAQC,QAAS,kBAAMD,EAAa1B,IAApC,uBAOA4B,EAAU,SAAC,GAAqC,IAApCvC,EAAmC,EAAnCA,QAASuB,EAA0B,EAA1BA,OAAQc,EAAkB,EAAlBA,aAC3BG,EAAexC,EAAQuB,QAAO,SAAAkB,GAAM,OACxCA,EAAOC,KAAKC,cAAcC,SAASrB,EAAOoB,kBAG5C,OACE,8BACKH,EAAaK,KAAI,SAAAJ,GAAM,OACtB,cAAC,EAAD,CAAwB9B,GAAI8B,EAAO9B,GAAI+B,KAAMD,EAAOC,KAAMI,OAAQL,EAAOK,OAAQT,aAAcA,GAAlFI,EAAO9B,UAMxBoC,EAAS,SAAC,GAAsC,IAArCpC,EAAoC,EAApCA,GAAI+B,EAAgC,EAAhCA,KAAMI,EAA0B,EAA1BA,OAAQT,EAAkB,EAAlBA,aACjC,OACE,sBAAKW,MAAO,CAACC,QAAS,QAAtB,UACE,8BAAIP,EAAJ,IAAWI,EAAX,OACA,cAAC,EAAD,CAAUnC,GAAIA,EAAI0B,aAAcA,QAKvBa,EArLH,WACV,MAA8BC,mBAAS,IAAvC,mBAAOnD,EAAP,KAAgBoD,EAAhB,KACA,EAAgCD,mBAAS,IAAzC,mBAAQrB,EAAR,KAAiBuB,EAAjB,KACA,EAAmCF,mBAAS,IAA5C,mBAAQpB,EAAR,KAAmBuB,EAAnB,KACA,EAA4CH,oBAAS,GAArD,mBAAOI,EAAP,KAAuBC,EAAvB,KACA,EAA4BL,mBAAS,IAArC,mBAAO5B,EAAP,KAAekC,EAAf,KACA,EAAwCN,mBAAS,MAAjD,mBAAOO,EAAP,KAAqBC,EAArB,KACA,EAA4BR,oBAAS,GAArC,mBAAO/B,EAAP,KAAewC,EAAf,KAEAC,qBAAU,WACR/C,QAAQC,IAAI,iCACX+C,EAAc7D,SACZG,MAAK,SAAA2D,GACJX,EAAWW,QAEd,CAACR,IAEJ,IAyEMS,EAAc,CAClBnC,UA1EgB,SAACoC,GACjBA,EAAMC,iBACNpD,QAAQC,IAAI,qBAAsBkD,EAAME,QAExC,IAAMC,EAAY,CAChB1B,KAAMZ,EACNgB,OAAQf,GAGV,GAAG/B,EAAQ6C,KAAI,SAAAJ,GAAM,OAAIA,EAAOC,QAAME,SAASwB,EAAU1B,MAAM,CAC7D,IAAM2B,EAASC,OAAOC,QAAP,UAAkBH,EAAU1B,KAA5B,2EACT/B,EAAKX,EAAQwE,MAAK,SAAA/B,GAAM,OAAIA,EAAOC,OAAS0B,EAAU1B,QAAM/B,GAElEG,QAAQC,IAAIJ,GACT0D,GACDP,EACCpD,OAAOC,EAAIyD,GACXhE,MAAK,SAAAqE,GACJ3D,QAAQC,IAAI0D,GACZd,EAAgB,WAAD,OAAYS,EAAU1B,OACrCkB,GAAU,GACVJ,GAAmBD,MAEpBmB,OAAM,SAAAC,GACLhB,EAAgB,kBAAD,OACKS,EAAU1B,KADf,sDAMnBoB,EACGvD,OAAO6D,GACPhE,MAAK,SAAAqE,GACJ3D,QAAQC,IAAI0D,GACZd,EAAgB,SAAD,OAAUS,EAAU1B,OACnCkB,GAAU,GACVJ,GAAmBD,MAEpBmB,OAAM,SAAAC,GACL7D,QAAQC,IAAI4D,EAAMtE,SAASC,KAAKqE,OAChChB,EAAgBgB,EAAMtE,SAASC,KAAKqE,OACpCf,GAAU,MAGhBgB,YAAW,WACTjB,EAAgB,QACf,MA6BH7B,UACAC,YACAC,iBAhBuB,SAACiC,GACxBZ,EAAWY,EAAME,OAAO1C,QAgBxBQ,mBAbyB,SAACgC,GAC1BX,EAAaW,EAAME,OAAO1C,SAe5B,OACE,gCACE,cAAC,EAAD,CAAcN,QAASuC,EAActC,OAAQA,IAC7C,2CACA,cAAC,EAAD,CAAQG,OAAQA,EAAQC,mBAhBD,SAACyC,GAC1BR,EAAUQ,EAAME,OAAO1C,UAgBrB,2CACA,cAAC,EAAD,eAAYuC,IACZ,yCACA,cAAC,EAAD,CAAShE,QAASA,EAASoD,WAAYpD,EAASuB,OAAQA,EAAQc,aAxC/C,SAAC1B,GACpBG,QAAQC,IAAI,yBACZ+C,EAAc9C,QAAQL,GACtBgD,EAAgB,8BAChBC,GAAU,GACVgB,YAAW,WACTjB,EAAgB,QACf,KAEHH,GAAmBD,UC5EvBsB,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.9c55d976.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => \r\n        response.data\r\n    )\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request\r\n}\r\n\r\nconst deleteP = id => {\r\n    axios.delete(`${baseUrl}/${id}`)\r\n    console.log(`deleted person with id: ${id}`)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    console.log(`updated number for person with id: ${id}`)\r\n    return request\r\n}\r\n\r\nconst persons = {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    deleteP: deleteP\r\n}\r\n\r\nexport default persons","import React, { useEffect, useState } from 'react'\nimport personService from './services/persons'\nimport './index.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [RefreshPersons, setRefreshPersons] = useState(false);\n  const [filter, setFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [isGood, setIsGood] = useState(false)\n\n  useEffect(() => {\n    console.log(\"getAll persons effect has run\")\n     personService.getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n    })\n  }, [RefreshPersons])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    console.log('add button clicked', event.target)\n    \n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n\n    if(persons.map(person => person.name).includes(newPerson.name)){\n      const result = window.confirm(`${newPerson.name} is already added to phonebook, replace the old number with a new one?`)\n      const id = persons.find(person => person.name === newPerson.name).id\n      //console.log(persons)\n      console.log(id)\n      if(result){\n        personService\n        .update(id, newPerson)\n        .then(returnedPerson => {\n          console.log(returnedPerson)\n          setErrorMessage(`Updated ${newPerson.name}`)\n          setIsGood(true)\n          setRefreshPersons(!RefreshPersons)\n        })\n        .catch(error => {\n          setErrorMessage(\n            `Information of ${newPerson.name} has already been removed from the server`\n          )\n        })\n      }\n    } else {\n      personService\n        .create(newPerson)\n        .then(returnedPerson => {\n          console.log(returnedPerson)\n          setErrorMessage(`Added ${newPerson.name}`)\n          setIsGood(true)\n          setRefreshPersons(!RefreshPersons)\n        })\n        .catch(error => {\n          console.log(error.response.data.error)\n          setErrorMessage(error.response.data.error)\n          setIsGood(false)\n        })\n    }\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  }\n\n  const deletePerson = (id) => {\n    console.log('delete button clicked')\n    personService.deleteP(id)\n    setErrorMessage(`Person deleted succesfully`)\n    setIsGood(true)\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n\n    setRefreshPersons(!RefreshPersons)\n  }\n  \n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  const AddNewProps = {\n    addPerson,\n    newName,\n    newNumber,\n    handleNameChange,\n    handleNumberChange\n  }\n\n  return (\n    <div>\n      <Notification message={errorMessage} isGood={isGood}/>\n      <h2>Phonebook</h2>\n      <Filter filter={filter} handleFilterChange={handleFilterChange}/>\n      <h2>add a new</h2>\n      <AddNew {...AddNewProps}/>\n      <h2>Numbers</h2>\n      <Persons persons={persons} setPersons={persons} filter={filter} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nconst Notification = ({message, isGood}) => {\n  if(message === null){\n    return null\n  }\n\n  return(\n    <div className={isGood ? 'notification-good' : 'notification-bad'}>\n      {message}\n    </div>\n  )\n}\n\nconst Filter = ({filter, handleFilterChange}) => {\n  return(\n    <div>\n      filter shown with <input value={filter} onChange={handleFilterChange}/>\n    </div>\n  )\n}\n\nconst AddNew = (props) => {\n  const {addPerson, newName, newNumber, handleNameChange, handleNumberChange} = props\n  return(\n    <div>\n      <form onSubmit={addPerson}>\n        <div>\n          <div>name: <input value={newName} onChange={handleNameChange}/></div>\n          <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst DeleteId = ({id, deletePerson}) => {\n  return(\n    <div>\n      <button onClick={() => deletePerson(id)}>\n        delete\n      </button>\n    </div>\n  )\n}\n\nconst Persons = ({persons, filter, deletePerson}) => {\n  const shownPersons = persons.filter(person => \n    person.name.toLowerCase().includes(filter.toLowerCase())\n  )\n\n  return(\n    <div>\n        {shownPersons.map(person => \n          <Person key={person.id} id={person.id} name={person.name} number={person.number} deletePerson={deletePerson}/>\n        )}\n    </div>\n  )\n}\n\nconst Person = ({id, name, number, deletePerson}) => {\n  return(\n    <div style={{display: \"flex\",}}>\n      <p>{name} {number} </p>\n      <DeleteId id={id} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}